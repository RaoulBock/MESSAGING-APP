<!DOCTYPE html>
<html>
  <head>
    <title>Chat App</title>
    <script src="https://cdn.socket.io/4.3.2/socket.io.js"></script>
    <style>
      /* Add your CSS styles here */
      #login {
        text-align: center;
        margin-top: 100px;
      }
      #chat {
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="login">
      <h2>Login</h2>
      <input type="text" id="username" placeholder="Enter username" />
      <input type="password" id="password" placeholder="Enter password" />
      <button onclick="login()">Login</button>
    </div>

    <div id="chat">
      <ul id="messages"></ul>
      <input id="input" autocomplete="off" /><button onclick="sendMessage()">
        Send
      </button>
    </div>

    <script>
      const socket = io();

      function login() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        socket.emit("login", { username, password });

        socket.on("login success", () => {
          document.getElementById("login").style.display = "none";
          document.getElementById("chat").style.display = "block";
        });

        socket.on("login failed", () => {
          alert("Login failed. Please try again.");
        });
      }

      function sendMessage() {
        const message = document.getElementById("input").value;
        socket.emit("chat message", message);
        document.getElementById("input").value = "";
      }

      socket.on("chat message", (msg) => {
        const item = document.createElement("li");
        item.textContent = msg;
        document.getElementById("messages").appendChild(item);
      });
    </script>
  </body>
</html>
